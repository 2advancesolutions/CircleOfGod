"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[9695],{9695:(Y,D,b)=>{b.r(D),b.d(D,{startInputShims:()=>W});var _=b(8239),S=b(2377);const y=new WeakMap,L=(e,n,t,o=0)=>{y.has(e)!==t&&(t?B(e,n,o):C(e,n))},T=e=>e===e.getRootNode().activeElement,B=(e,n,t)=>{const o=n.parentNode,r=n.cloneNode(!1);r.classList.add("cloned-input"),r.tabIndex=-1,o.appendChild(r),y.set(e,r);const s="rtl"===e.ownerDocument.dir?9999:-9999;e.style.pointerEvents="none",n.style.transform=`translate3d(${s}px,${t}px,0) scale(0)`},C=(e,n)=>{const t=y.get(e);t&&(y.delete(e),t.remove()),e.style.pointerEvents="",n.style.transform=""},A="input, textarea, [no-blur], [contenteditable]",k=function(){var e=(0,_.Z)(function*(n,t,o,r,c){if(!o&&!r)return;const s=((e,n,t)=>((e,n,t,o)=>{const r=e.top,c=e.bottom,s=n.top,i=s+15,f=.75*Math.min(n.bottom,o-t)-c,m=i-r,l=Math.round(f<0?-f:m>0?-m:0),a=Math.min(l,r-s),h=Math.abs(a)/.3;return{scrollAmount:a,scrollDuration:Math.min(400,Math.max(150,h)),scrollPadding:t,inputSafeY:4-(r-i)}})((e.closest("ion-item,[ion-item]")||e).getBoundingClientRect(),n.getBoundingClientRect(),t,e.ownerDocument.defaultView.innerHeight))(n,o||r,c);if(o&&Math.abs(s.scrollAmount)<4)t.focus();else if(L(n,t,!0,s.inputSafeY),t.focus(),(0,S.r)(()=>n.click()),"undefined"!=typeof window){let d;const i=function(){var f=(0,_.Z)(function*(){void 0!==d&&clearTimeout(d),window.removeEventListener("ionKeyboardDidShow",u),window.removeEventListener("ionKeyboardDidShow",i),o&&(yield o.scrollByPoint(0,s.scrollAmount,s.scrollDuration)),L(n,t,!1,s.inputSafeY),t.focus()});return function(){return f.apply(this,arguments)}}(),u=()=>{window.removeEventListener("ionKeyboardDidShow",u),window.addEventListener("ionKeyboardDidShow",i)};if(o){const f=yield o.getScrollElement();if(s.scrollAmount>f.scrollHeight-f.clientHeight-f.scrollTop)return"password"===t.type?(s.scrollAmount+=50,window.addEventListener("ionKeyboardDidShow",u)):window.addEventListener("ionKeyboardDidShow",i),void(d=setTimeout(i,1e3))}i()}});return function(t,o,r,c,s){return e.apply(this,arguments)}}(),I="$ionPaddingTimer",P=(e,n)=>{if("INPUT"!==e.tagName||e.parentElement&&"ION-INPUT"===e.parentElement.tagName||e.parentElement&&e.parentElement.parentElement&&"ION-SEARCHBAR"===e.parentElement.parentElement.tagName)return;const t=e.closest("ion-content");if(null===t)return;const o=t[I];o&&clearTimeout(o),n>0?t.style.setProperty("--keyboard-offset",`${n}px`):t[I]=setTimeout(()=>{t.style.setProperty("--keyboard-offset","0px")},120)},W=e=>{const n=document,t=e.getNumber("keyboardHeight",290),o=e.getBoolean("scrollAssist",!0),r=e.getBoolean("hideCaretOnScroll",!0),c=e.getBoolean("inputBlurring",!0),s=e.getBoolean("scrollPadding",!0),d=Array.from(n.querySelectorAll("ion-input, ion-textarea")),i=new WeakMap,u=new WeakMap,f=function(){var l=(0,_.Z)(function*(a){yield new Promise(g=>(0,S.c)(a,g));const w=a.shadowRoot||a,h=w.querySelector("input")||w.querySelector("textarea"),v=a.closest("ion-content"),p=v?null:a.closest("ion-footer");if(h){if(v&&r&&!i.has(a)){const g=((e,n,t)=>{if(!t||!n)return()=>{};const o=d=>{T(n)&&L(e,n,d)},r=()=>L(e,n,!1),c=()=>o(!0),s=()=>o(!1);return(0,S.a)(t,"ionScrollStart",c),(0,S.a)(t,"ionScrollEnd",s),n.addEventListener("blur",r),()=>{(0,S.b)(t,"ionScrollStart",c),(0,S.b)(t,"ionScrollEnd",s),n.addEventListener("ionBlur",r)}})(a,h,v);i.set(a,g)}if((v||p)&&o&&!u.has(a)){const g=((e,n,t,o,r)=>{let c;const s=i=>{c=(0,S.p)(i)},d=i=>{if(!c)return;const u=(0,S.p)(i);!((e,n,t)=>{if(n&&t){const o=n.x-t.x,r=n.y-t.y;return o*o+r*r>e*e}return!1})(6,c,u)&&!T(n)&&(i.stopPropagation(),k(e,n,t,o,r))};return e.addEventListener("touchstart",s,!0),e.addEventListener("touchend",d,!0),()=>{e.removeEventListener("touchstart",s,!0),e.removeEventListener("touchend",d,!0)}})(a,h,v,p,t);u.set(a,g)}}});return function(w){return l.apply(this,arguments)}}();c&&(()=>{let e=!0,n=!1;const t=document;(0,S.a)(t,"ionScrollStart",()=>{n=!0}),t.addEventListener("focusin",()=>{e=!0},!0),t.addEventListener("touchend",s=>{if(n)return void(n=!1);const d=t.activeElement;if(!d||d.matches(A))return;const i=s.target;i!==d&&(i.matches(A)||i.closest(A)||(e=!1,setTimeout(()=>{e||d.blur()},50)))},!1)})(),s&&(e=>{const n=document;n.addEventListener("focusin",r=>{P(r.target,e)}),n.addEventListener("focusout",r=>{P(r.target,0)})})(t);for(const l of d)f(l);n.addEventListener("ionInputDidLoad",l=>{f(l.detail)}),n.addEventListener("ionInputDidUnload",l=>{(l=>{if(r){const a=i.get(l);a&&a(),i.delete(l)}if(o){const a=u.get(l);a&&a(),u.delete(l)}})(l.detail)})}}}]);